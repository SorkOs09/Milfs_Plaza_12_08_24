image final_act_gg_push_toilet 1 = "/cg/final_act/prison/activities/toilet/1.png"
image final_act_gg_push_toilet 2 = "/cg/final_act/prison/activities/toilet/2.png"
image final_act_gg_push_toilet 3 = "/cg/final_act/prison/activities/toilet/3.png"

image final_act_push_up 1 = "/cg/final_act/prison/activities/push_ups/1.png"

image final_act_push_up 2 = "/cg/final_act/prison/activities/push_ups/2.png"

image final_act_push_up 3 = "/cg/final_act/prison/activities/push_ups/3.png"


image final_act_chrisite_bg = "cg/final_act/christie/bg.png"
image final_act_vfx_bullet_1 = "cg/final_act/morgue/end/vfx_bullet.png"
image final_act_vfx_bullet_2 = "cg/final_act/morgue/end/vfx_bullet.png"
image final_act_vfx_bullet_3 = "cg/final_act/morgue/end/vfx_bullet.png"

image final_act_pre_end 1 = 'cg/final_act/morgue/pre_end/1.png'
image final_act_pre_end 1_blur = 'cg/final_act/morgue/pre_end/1_blur.png'

image final_act_pre_end 2 = 'cg/final_act/morgue/pre_end/2.png'

image final_act_chrisite start  = "cg/final_act/christie/christie/1.png"
image final_act_chrisite finish = "cg/final_act/christie/christie/4.png"
image final_act_chrisite_cum:
    "/cg/final_act/christie/final/1.png"
    .17
    "cg/final_act/christie/final/2.png"
    .17
    "cg/final_act/christie/final/3.png"
    .17
    "cg/final_act/christie/final/4.png"
    .17
    "cg/final_act/christie/final/5.png"
    .17
    "cg/final_act/christie/final/6.png"
    .17
image final_act_chrisite_point:
    "cg/final_act/christie/point/1.png"
    .17
    "cg/final_act/christie/point/2.png"
    .17
    "cg/final_act/christie/point/3.png"
    .17
    "cg/final_act/christie/point/4.png"
    .17
image final_act_chrisite anim_1:
    "cg/final_act/christie/christie/1.png"
    .17
    "cg/final_act/christie/christie/2.png"
    .17
    "cg/final_act/christie/christie/3.png"
    .17
    "cg/final_act/christie/christie/4.png"
    .17
    "cg/final_act/christie/christie/3.png"
    .17
    "cg/final_act/christie/christie/2.png"
    .17
    repeat


image final_act_chrisite anim_2:
    "cg/final_act/christie/christie/1.png"
    .12
    "cg/final_act/christie/christie/2.png"
    .12
    "cg/final_act/christie/christie/3.png"
    .12
    "cg/final_act/christie/christie/4.png"
    .12
    "cg/final_act/christie/christie/3.png"
    .12
    "cg/final_act/christie/christie/2.png"
    .12
    repeat


image final_act_chrisite anim_3:
    "cg/final_act/christie/christie/1.png"
    .08
    "cg/final_act/christie/christie/2.png"
    .08
    "cg/final_act/christie/christie/3.png"
    .08
    "cg/final_act/christie/christie/4.png"
    .08
    "cg/final_act/christie/christie/3.png"
    .08
    "cg/final_act/christie/christie/2.png"
    .08
    repeat

image final_act_milf_gg_jerk anim_1: 
    FlashLight("cg/final_act/milf_cage/dick/1.png")
    .17
    FlashLight("cg/final_act/milf_cage/dick/2.png")
    .17
    FlashLight("cg/final_act/milf_cage/dick/3.png")
    .17
    FlashLight("cg/final_act/milf_cage/dick/4.png")
    .17
    FlashLight("cg/final_act/milf_cage/dick/6.png")
    .17
    FlashLight("cg/final_act/milf_cage/dick/7.png")
    .17
    FlashLight("cg/final_act/milf_cage/dick/6.png")
    .17
    FlashLight("cg/final_act/milf_cage/dick/5.png")
    .17
    FlashLight("cg/final_act/milf_cage/dick/4.png")
    .17
    FlashLight("cg/final_act/milf_cage/dick/3.png")
    .17
    FlashLight("cg/final_act/milf_cage/dick/2.png")
    .17
    repeat


image final_act_milf_gg_jerk anim_2: 
    FlashLight("cg/final_act/milf_cage/dick/1.png")
    .12
    FlashLight("cg/final_act/milf_cage/dick/2.png")
    .12
    FlashLight("cg/final_act/milf_cage/dick/3.png")
    .12
    FlashLight("cg/final_act/milf_cage/dick/4.png")
    .12
    FlashLight("cg/final_act/milf_cage/dick/6.png")
    .12
    FlashLight("cg/final_act/milf_cage/dick/7.png")
    .12
    FlashLight("cg/final_act/milf_cage/dick/6.png")
    .12
    FlashLight("cg/final_act/milf_cage/dick/5.png")
    .12
    FlashLight("cg/final_act/milf_cage/dick/4.png")
    .12
    FlashLight("cg/final_act/milf_cage/dick/3.png")
    .12
    FlashLight("cg/final_act/milf_cage/dick/2.png")
    .12
    repeat

image final_act_milf_gg_jerk anim_3: 
    FlashLight("cg/final_act/milf_cage/dick/1.png")
    .08
    FlashLight("cg/final_act/milf_cage/dick/2.png")
    .08
    FlashLight("cg/final_act/milf_cage/dick/3.png")
    .08
    FlashLight("cg/final_act/milf_cage/dick/4.png")
    .08
    FlashLight("cg/final_act/milf_cage/dick/6.png")
    .08
    FlashLight("cg/final_act/milf_cage/dick/7.png")
    .08
    FlashLight("cg/final_act/milf_cage/dick/6.png")
    .08
    FlashLight("cg/final_act/milf_cage/dick/5.png")
    .08
    FlashLight("cg/final_act/milf_cage/dick/4.png")
    .08
    FlashLight("cg/final_act/milf_cage/dick/3.png")
    .08
    FlashLight("cg/final_act/milf_cage/dick/2.png")
    .08
    repeat


# image final_act_milf_gg_jerk anim_1 = FlashLight("final_act_milf_gg_jerk_anim_1_tmp")
# image final_act_milf_gg_jerk anim_2 = FlashLight("final_act_milf_gg_jerk_anim_2_tmp")
# image final_act_milf_gg_jerk anim_3 = FlashLight("final_act_milf_gg_jerk_anim_3_tmp")

image final_act_milf_gg_jerk anim_end = FlashLight("cg/final_act/milf_cage/dick/7.png")

image final_act_gg_activities push_up_anim_1:
    "final_act_push_up 1"
    .13
    "final_act_push_up 2"
    .13
    "final_act_push_up 3"
    .13
    "final_act_push_up 2"
    .13
    repeat

image final_act_gg_activities push_up_anim_2:
    "final_act_push_up 1"
    .08
    "final_act_push_up 2"
    .08
    "final_act_push_up 3"
    .08
    "final_act_push_up 2"
    .08
    repeat
    
image final_act_gg_activities push_up_anim_3:
    "final_act_push_up 1"
    .04
    "final_act_push_up 2"
    .04
    "final_act_push_up 3"
    .04
    "final_act_push_up 2"
    .04
    repeat
    
image final_act_gg_activities sit_on_bed = 'cg/final_act/prison/activities/sit_on_bed.png'
image final_act_gg_activities masturbation 0 = "cg/final_act/prison/activities/masturbation/1.png"
image final_act_gg_activities masturbation 0 = "cg/final_act/prison/activities/masturbation/1.png"

image final_act_gg_activities masturbation end = "cg/final_act/prison/activities/masturbation/5.png"

image final_act_cage_shadow = FlashLight("cg/final_act/prison/cage_shadow.png")

image final_act_gg_activities masturbation anim_1:
    "cg/final_act/prison/activities/masturbation/1.png"
    .13
    "cg/final_act/prison/activities/masturbation/2.png"
    .13
    "cg/final_act/prison/activities/masturbation/3.png"
    .13
    "cg/final_act/prison/activities/masturbation/4.png"
    .13
    "cg/final_act/prison/activities/masturbation/5.png"
    .13
    "cg/final_act/prison/activities/masturbation/4.png"
    .13
    "cg/final_act/prison/activities/masturbation/3.png"
    .13
    "cg/final_act/prison/activities/masturbation/2.png"
    .13
    repeat



image final_act_gg_activities masturbation anim_2:
    "cg/final_act/prison/activities/masturbation/1.png"
    .08
    "cg/final_act/prison/activities/masturbation/2.png"
    .08
    "cg/final_act/prison/activities/masturbation/3.png"
    .08
    "cg/final_act/prison/activities/masturbation/4.png"
    .08
    "cg/final_act/prison/activities/masturbation/5.png"
    .08
    "cg/final_act/prison/activities/masturbation/4.png"
    .08
    "cg/final_act/prison/activities/masturbation/3.png"
    .08
    "cg/final_act/prison/activities/masturbation/2.png"
    .08
    repeat




image final_act_gg_activities masturbation anim_3:
    "cg/final_act/prison/activities/masturbation/1.png"
    .04
    "cg/final_act/prison/activities/masturbation/2.png"
    .04
    "cg/final_act/prison/activities/masturbation/3.png"
    .04
    "cg/final_act/prison/activities/masturbation/4.png"
    .04
    "cg/final_act/prison/activities/masturbation/5.png"
    .04
    "cg/final_act/prison/activities/masturbation/4.png"
    .04
    "cg/final_act/prison/activities/masturbation/3.png"
    .04
    "cg/final_act/prison/activities/masturbation/2.png"
    .04
    repeat


image final_act_milf_gg_jerk_sperm_3:
    "cg/final_act/milf_cage/sperm/1.png"
    .08
    "cg/final_act/milf_cage/sperm/2.png"
    .08
    "cg/final_act/milf_cage/sperm/3.png"
    .08
    "cg/final_act/milf_cage/sperm/4.png"
    .08
    "cg/final_act/milf_cage/sperm/5.png"
    .08
    "cg/final_act/milf_cage/sperm/6.png"
    .08
    "cg/final_act/milf_cage/sperm/7.png"
    .08
    "cg/final_act/milf_cage/sperm/8.png"
    .08
    "cg/final_act/milf_cage/sperm/9.png"
    .08
    "cg/final_act/milf_cage/sperm/10.png"
    .08
    "cg/final_act/milf_cage/sperm/11.png"
    .08
    "cg/final_act/milf_cage/sperm/12.png"


image final_act_milf_gg_jerk_sperm_2:
    "cg/final_act/milf_cage/sperm/1.png"
    .12
    "cg/final_act/milf_cage/sperm/2.png"
    .12
    "cg/final_act/milf_cage/sperm/3.png"
    .12
    "cg/final_act/milf_cage/sperm/4.png"
    .12
    "cg/final_act/milf_cage/sperm/5.png"
    .12
    "cg/final_act/milf_cage/sperm/6.png"
    .12
    "cg/final_act/milf_cage/sperm/7.png"
    .12
    "cg/final_act/milf_cage/sperm/8.png"
    .12
    "cg/final_act/milf_cage/sperm/9.png"
    .12
    "cg/final_act/milf_cage/sperm/10.png"
    .12
    "cg/final_act/milf_cage/sperm/11.png"
    .12
    "cg/final_act/milf_cage/sperm/12.png"

image final_act_milf_gg_jerk_sperm_1:
    "cg/final_act/milf_cage/sperm/1.png"
    .2
    "cg/final_act/milf_cage/sperm/2.png"
    .2
    "cg/final_act/milf_cage/sperm/3.png"
    .2
    "cg/final_act/milf_cage/sperm/4.png"
    .2
    "cg/final_act/milf_cage/sperm/5.png"
    .2
    "cg/final_act/milf_cage/sperm/6.png"
    .2
    "cg/final_act/milf_cage/sperm/7.png"
    .2
    "cg/final_act/milf_cage/sperm/8.png"
    .2
    "cg/final_act/milf_cage/sperm/9.png"
    .2
    "cg/final_act/milf_cage/sperm/10.png"
    .2
    "cg/final_act/milf_cage/sperm/11.png"
    .2
    "cg/final_act/milf_cage/sperm/12.png"


image final_act_gg_activities_masturbation_sperm_1:
    "cg/final_act/prison/activities/sperm/1.png"
    .13
    "cg/final_act/prison/activities/sperm/2.png"
    .13
    "cg/final_act/prison/activities/sperm/3.png"
    .13
    "cg/final_act/prison/activities/sperm/4.png"
    .13
    "cg/final_act/prison/activities/sperm/5.png"
    .13
    "cg/final_act/prison/activities/sperm/6.png"
    .13
    "cg/final_act/prison/activities/sperm/7.png"
    

image final_act_gg_activities_masturbation_sperm_2:
    "cg/final_act/prison/activities/sperm/1.png"
    .13
    "cg/final_act/prison/activities/sperm/2.png"
    .13
    "cg/final_act/prison/activities/sperm/3.png"
    .13
    "cg/final_act/prison/activities/sperm/4.png"
    .13
    "cg/final_act/prison/activities/sperm/5.png"
    .13
    "cg/final_act/prison/activities/sperm/6.png"
    .13
    "cg/final_act/prison/activities/sperm/7.png"
    

image final_act_gg_activities_masturbation_sperm_3:
    "cg/final_act/prison/activities/sperm/1.png"
    .13
    "cg/final_act/prison/activities/sperm/2.png"
    .13
    "cg/final_act/prison/activities/sperm/3.png"
    .13
    "cg/final_act/prison/activities/sperm/4.png"
    .13
    "cg/final_act/prison/activities/sperm/5.png"
    .13
    "cg/final_act/prison/activities/sperm/6.png"
    .13
    "cg/final_act/prison/activities/sperm/7.png"
    

image final_act_gg_activities_masturbation_sperm:
    "final_act_gg_activities_masturbation_sperm_1"
    .78
    "final_act_gg_activities_masturbation_sperm_2"
    .78
    "final_act_gg_activities_masturbation_sperm_3"
    .78


image final_act_gg_push_toilet anim_1:
    "final_act_gg_push_toilet 1"
    .23
    "final_act_gg_push_toilet 2"
    .23
    "final_act_gg_push_toilet 3"
    .23
    "final_act_gg_push_toilet 2"
    .23
    repeat

image final_act_gg_push_toilet anim_2:
    "final_act_gg_push_toilet 1"
    .12
    "final_act_gg_push_toilet 2"
    .12
    "final_act_gg_push_toilet 3"
    .12
    "final_act_gg_push_toilet 2"
    .12
    repeat


image final_act_gg_push_toilet anim_3:
    "final_act_gg_push_toilet 1"
    .06
    "final_act_gg_push_toilet 2"
    .06
    "final_act_gg_push_toilet 3"
    .06
    "final_act_gg_push_toilet 2"
    .06
    repeat

image final_act_gg_push_toilet 2 = "/cg/final_act/prison/activities/toilet/2.png"
image final_act_gg_push_toilet 3 = "/cg/final_act/prison/activities/toilet/3.png"

image final_act_prison_large_bg morning   = LiveComposite(
    (2400, 1080), 
    #(0, 0), Solid('#fffa'),
    (-270, 0), "/cg/final_act/prison/large_bg/afternoon.png")

image final_act_prison_large_bg afternoon = "final_act_prison_large_bg morning"
image final_act_prison_large_bg evening   = LiveComposite(
    (2400, 1080), 
    #(0, 0), Solid('#fffa'),
    (-270, 0), "/cg/final_act/prison/large_bg/evening.png")
image final_act_prison_large_bg night     = LiveComposite(
    (2400, 1080), 
    #(0, 0), Solid('#fffa'),
    (-270, 0), "/cg/final_act/prison/large_bg/night.png")


image final_act_prison_action_arrow = 'cg/final_act/prison/action_arrow.png'
image final_act_prison_officer_at_large_bg = LiveComposite(
    (2400, 1080), 
    #(0, 0), Solid('#fffa'),
    (480, 0), "locations/imagebuttons/Prison/officer.png")


image final_act_prison_milf_at_large_bg = LiveComposite(
    (2400, 1080), 
    #(0, 0), Solid('#fffa'),
    (480, 0), "locations/imagebuttons/Prison/milf.png")


# init -200 python:
#     class FinalActHotSpotButton():
#         def __init__(self, img, cords, unhovered_action, hovered_action, clicked_action, **kwargs):
#             renpy.Displayable.__init__(self, **kwargs)
#             self.img     = Crop(cords, img)
#             self.transform = Transform(self.img)
#             self.cords   = cords
#             self.unhovered_action = unhovered_action
#             self.hovered_action   = hovered_action
#             self.clicked_action   = clicked_action
#             self.focused          = True

#     class FinalActHotSpot(renpy.Displayable):

#         def __init__(self, img = None, **kwargs):
#             renpy.Displayable.__init__(self, **kwargs)
#             self.img     = img
#             self.buttons = []

#             self.buttons_to_render = []

#         def check_hovered(self, x, y):
#             for i in self.buttons
#         def add_button(self, button_json):
#             if type(button_json) != type({1:'1'}):
#                 print(str(button_json))
#                 print("add button error!")
#                 print("not json!")
#                 return False
            
#             for i in ('cords', 'unhovered', 'hovered', 'action'):
#                 if i not in button_json:
#                     print(str(button_json))
#                     print("add button error!")
#                     print(i + " not in json!")
#                     return False

#             copy_button_json = copy.deepcopy(button_json)
#             cords = copy_button_json['cords']

#             copy_button_json.update({'crop':Crop(cords, self.img)})

#             self.buttons.append(copy_button_json)

            
       
#         def render(self, width, height, st, at):
            

#             rend = renpy.Render(1920, 1080)
  
            
#             rend.blit(renpy.render(Text(
#                 str(mouse_pos), 
#                 outlines = [(2, "#000a", 0, 0),], 
#                 size     = 30 
#                 ), 
#                 100, 475, st, at), (mouse_pos[0], mouse_pos[1]))

            
#             renpy.redraw(self, 0)
            
#             return rend

#         def event(self, ev, x, y, st):

#             # Compute the distance between the center of this displayable and
#             # the mouse pointer. The mouse pointer is supplied in x and y,
#             # relative to the upper-left corner of the displayable.
#             if 
#             distance = math.hypot(x - (self.width / 2), y - (self.height / 2))

#             # Base on the distance, figure out an alpha.
#             if distance <= self.opaque_distance:
#                 alpha = 1.0
#             elif distance >= self.transparent_distance:
#                 alpha = 0.0
#             else:
#                 alpha = 1.0 - 1.0 * (distance - self.opaque_distance) / (self.transparent_distance - self.opaque_distance)

#             # If the alpha has changed, trigger a redraw event.
#             if alpha != self.alpha:
#                 self.alpha = alpha
#                 renpy.redraw(self, 0)

#             # Pass the event to our child.
#             return self.child.event(ev, x, y, st)
#     #class FinalActHotSpot():


screen main_interface_hotspot_buttons_final_act:
    default loc = locations['Prison']

    for hov in xrange(len(loc.buttons)):
        $ img   = 'locations/buttons/'+str(loc.bg)+'_hover_'+str(hov)+'.png'
        $ btns  = loc.buttons[hov]
        for i in btns:
            $ btn       = btns[i]
            $ cords     = btn['cords']
            $ crop_img  = Crop(cords, img)

            image crop_img:
                xpos cords[0]
                ypos cords[1] 
                alpha .3
        #image img:
        #    alpha .35
        imagemap:

            ground 'alpha_solid'





            hover img

            for i in btns:
                $ btn       = btns[i]
                $ cords     = btn['cords']
                $ unhovered = btn['unhovered']
                $ hovered   = btn['hovered']
                $ action    = btn['action']
                hotspot (
                    cords[0], 
                    cords[1], 
                    cords[2], 
                    cords[3], 
                ):
                    unhovered unhovered
                    hovered   hovered
                    clicked  [
                    Hide('icons_interface', transition = Dissolve(.2)), 
                    ]+action at ButtonEffect01_full focus_mask None
                
screen prison_survival_screen:
    
    add 'prison_survival_icons'
    viewport:
        xmaximum 75
        ymaximum 55
        pos (865, 155)
        add '#0000'
        text str(final_act_sitost): 
            align (.5, .5) 
            size 35 
            outlines [(1, "#0003", 0, 0),] 
            color '#000'

    viewport:
        xmaximum 75
        ymaximum 55
        pos (1025, 155)
        add '#0000'
        text str(final_act_power): 
            align (.5, .5) 
            size 35 
            outlines [(1, "#0003", 0, 0),] 
            color '#000'

label special_prison_images_label:

    #if location_now == "Prison":
    if 'Prison' not in locations:
        return
    
    if location_now != 'Prison':
        return
    
    show final_act_gg_activities sit_on_bed
    
    if not len(locations['Prison'].buttons):
        return

    if 'bed' in locations['Prison'].buttons[0]:

        $ renpy.show('final_act_prison_action_arrow_bed', what = 'final_act_prison_action_arrow')

        $ renpy.show('final_act_prison_action_arrow_bed', what = 'final_act_prison_action_arrow', 
                at_list=[
                Transform(pos=(1420, 480), alpha = 0.0),
                
                ])
    if 'window' in locations['Prison'].buttons[0]:

        $ renpy.show('final_act_prison_action_arrow_window', what = 'final_act_prison_action_arrow')

        $ renpy.show('final_act_prison_action_arrow_window', what = 'final_act_prison_action_arrow', 
                at_list=[
                Transform(pos=(1900, 250), alpha = 0.0),
                
                ])

    if 'gym' in locations['Prison'].buttons[0]:

        $ renpy.show('final_act_prison_action_arrow_gym', what = 'final_act_prison_action_arrow')

        $ renpy.show('final_act_prison_action_arrow_gym', what = 'final_act_prison_action_arrow', 
                at_list=[
                Transform(pos=(1200, 900), alpha = 0.0),
                
                ])
        
    if 'toilet' in locations['Prison'].buttons[0]:

        $ renpy.show('final_act_prison_action_arrow_toilet', what = 'final_act_prison_action_arrow')
        $ renpy.show('final_act_prison_action_arrow_toilet', what = 'final_act_prison_action_arrow', 
                at_list=[
                final_act_7_action_arrow_transform(
                     pos_finish=(981, 560),
                     dur = .15, 
                     rot = 0.0,
                     alpha_finish = 0.0,
                     )
                ])

    

    return

label final_act_blind_transition_to_black_label:
    python:
        
        for i in range(1, 20):
            n = (i-1)*100
            j = Crop((0, 0, 120, 1080), 'black')
            renpy.show('black_'+str(i), what = j, 
                at_list=[
                final_act_4_blinds_transform(
                    xp  = n,
                    dur = i*.075,
                    xp_fin = n,
                    )
                ])
        
        renpy.pause(1.5, hard = True)

    return



label final_act_blind_transition_to_black_fast_label:
    python:
        
        for i in range(1, 20):
            n = (i-1)*100
            j = Crop((0, 0, 120, 1080), 'black')
            renpy.show('black_'+str(i), what = j, 
                at_list=[
                final_act_4_blinds_transform(
                    xp  = n,
                    dur = i*.015,
                    xp_fin = n,
                    )
                ])
        
        renpy.pause(0.3, hard = True)

    return
